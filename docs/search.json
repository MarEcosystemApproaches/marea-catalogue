[{"path":"index.html","id":"introduction","chapter":"Introduction","heading":"Introduction","text":"technical document summarizing information indicators marea R package Canada’s Maritimes Region. marea curates summarizes oceanographic, environmental, biological data resources relevant research stock assessment region. , provide technical documentation, overviews, contact information variable package.","code":"\n#meta <- marea_metadata() \n#meta <- meta %>%\n#  filter(Dataset != \"coastline\")\n#\n#sf <- readRDS(\"data/derived_data/azmp_area.rds\")\n#coastline <- rnaturalearth::ne_coastline(returnclass = \"sf\", scale = 10) #%>% st_make_valid()\n#coastline <- rnaturalearth::ne_countries(country = c(\"Canada\",\"United #States of America\"), returnclass = \"sf\", scale = 10)\n#sf_use_s2(F)\n#st_crop(coastline, st_buffer(sf, 10)) %>% ggplot() +\n#  geom_sf() +\n#  geom_sf(data = sf,\n#          fill = \"purple\",\n#          alpha = .4) +\n#  coord_sf(expand = F,\n#           xlim = c(-73, -51),\n#           ylim = c(39, 51))\n#"},{"path":"bottom-temperature-azmp.html","id":"bottom-temperature-azmp","chapter":"1 Bottom Temperature (AZMP)","heading":"1 Bottom Temperature (AZMP)","text":"Data Type: Tabular DataSpatial Scope: Scotian Shelf (4X, 4V, 4W)Duration 1950-2024Source: DFO Atlantic Zone Monitoring Program via azmpdata","code":""},{"path":"bottom-temperature-azmp.html","id":"introduction-to-indicator","chapter":"1 Bottom Temperature (AZMP)","heading":"1.1 Introduction to Indicator","text":"AZMP Bottom Temperature data represent derived regionally summarized data Atlantic Zone Monitoring Program (AZMP), accessed via azmpdata R package. azmpdata, raw temperature observations fixed AZMP monitoring stations quality controlled aggregated 12 nested non-mutually-exclusive regional aggregations, generating annual timeseries variables long records exist.AZMP Bottom Temperature derived CTD profiles deepest reliable temperature measurement fixed monitoring station, area-level values calculated mean station-level bottom temperatures within predefined spatial aggregations annual scale.","code":""},{"path":"bottom-temperature-azmp.html","id":"view-data","chapter":"1 Bottom Temperature (AZMP)","heading":"1.2 View Data","text":"","code":"\nlibrary(plotly)\nplotly_df <- azmp_bottom_temperature@data\nplot_ly(data = plotly_df, x= ~year, colors =  rcartocolor::carto_pal(12,\"Pastel\")) %>%\n  add_lines(y = ~mean_value,\n            color = ~region,\n            text = ~paste0(\"<b>\",region,\"<\/b>: \",round(mean_value,2),\"°C\"),\n            hoverinfo = \"x+text\",\n            line = list(width = 2)) %>%\n    layout(\n    title = \"AZMP Bottom Temperature by Region\",\n    xaxis = list(title = \"Year\"),\n    yaxis = list(title = \"Sea Bottom Temperature (°C)\",\n                 fixedrange = T),\n    hovermode = \"x unified\"\n  ) %>%\n  config(displayModeBar = FALSE)"},{"path":"bottom-temperature-azmp.html","id":"trends","chapter":"1 Bottom Temperature (AZMP)","heading":"1.3 Trends","text":"AZMP Bottom Temperature varies regions, highest value 8.75 found Emerald Basin, lowest value 1.7 found Misaine Bank.overall trend increasing across regions. 12 regional subdivisions increasing Bottom Temperature trends 0 negative trends. 11 trends statistically significant time. 7 regions highest temperature values within last 10 years sampling (2014-2024)recent year sampling (2024), 3 regions values high compared overall timeseries (>70th percentile), 8 regions values moderate (30th 70th percentile), 1 regions low values (<30th percentile) within timeseries.","code":""},{"path":"bottom-temperature-azmp.html","id":"relevance-to-research-and-stock-assessments","chapter":"1 Bottom Temperature (AZMP)","heading":"1.4 Relevance to Research and Stock Assessments","text":"Sea bottom temperature highly relevant population dynamics spatial distributions, particularly benthic bottom-associated species. effects sea bottom temperature fisheries expected variable regions species, since thermal envelopes vary across species shifts temperature can increase decrease preferred thermal habitat across regions.Scotian Shelf-Bay Fundy region, warming bottom temperatures associated negative impacts /northward distribution shifts key decapod species, northern shrimp snow crab, region represents southernmost extent fisheries (Zisserson Cook 2017; Chang et al. 2025). Alternatively, recent increases bottom temperature across Northwestern Atlantic increased suitable thermal habitat halibut Eastern Canadian NAFO zones, models project increases abundance within Canadian range bottom temperatures continue increase (Shackell et al. 2022; Czich et al. 2023).","code":""},{"path":"bottom-temperature-azmp.html","id":"variable-definitions","chapter":"1 Bottom Temperature (AZMP)","heading":"1.5 Variable Definitions","text":"","code":""},{"path":"bottom-temperature-azmp.html","id":"get-the-data","chapter":"1 Bottom Temperature (AZMP)","heading":"1.6 Get the Data","text":"","code":"\nlibrary(marea)\ndata('azmp_bottom_temperature')\nplot(azmp_bottom_temperature)"},{"path":"surface-salinity-azmp.html","id":"surface-salinity-azmp","chapter":"2 Surface Salinity (AZMP)","heading":"2 Surface Salinity (AZMP)","text":"Data Type: Tabular DataSpatial Scope: Scotian Shelf (4X, 4V, 4W)Duration 1948-2024Source: DFO Atlantic Zone Monitoring Program via azmpdata","code":""},{"path":"surface-salinity-azmp.html","id":"introduction-to-indicator-1","chapter":"2 Surface Salinity (AZMP)","heading":"2.1 Introduction to Indicator","text":"AZMP Surface Salinity spatially-averaged salinity value Atlantic Zone Monitoring Program (AZMP) monitoring stations 0m depth, spatially temporally summarized annual values Scotian Shelf region (NAFO zones 4X, 4V, 4W).Surface salinity region driven several factors, including inflow rivers, melting sea ice, precipitation, advection wind ocean currents (Layton et al. 2025). Interannual changes salinity Scotian Shelf region linked changes processes, indicative changes biology region (Grodsky et al. 2017).","code":""},{"path":"surface-salinity-azmp.html","id":"view-data-1","chapter":"2 Surface Salinity (AZMP)","heading":"2.2 View Data","text":"","code":"\nlibrary(plotly)\nplotly_df <- data@data %>%\n  mutate( \n    smooth_10yr = zoo::rollapply(mean_value, mean, width = 10, partial = TRUE),\n    overall_mean = mean(mean_value))\n\np <- plot_ly(plotly_df, x = ~year) %>%\n  add_lines(y = ~mean_value,\n            name = \"Annual Mean\",\n            line = list(color = \"grey\"),\n            hovertemplate = \"Monthly anomaly: %{y:.2f}<extra><\/extra>\"\n           ) %>%\n  add_lines(y = ~smooth_10yr,\n            name = \"10-yr Smooth\",\n            line = list(color = \"blue\", width = 2),\n            hovertemplate = \"10-yr smoothed: %{y:.2f}<extra><\/extra>\",\n            ) %>%\n    add_lines(y = ~overall_mean,\n            name = \"Overall Mean\",\n            line = list(color = \"black\", width = 2, dash = \"dash\"),\n            hovertemplate = \"Overall Mean: %{y:.2f}<extra><\/extra>\",\n           ) %>%\n  layout(\n    title = \"AZMP Surface Salinity for Scotial Shelf (4X, 4V, 4W)<br><sup>Source: DFO Atlantic Zone Monitoring Program via azmpdata<\/sup>\",\n    xaxis = list(title = \"Year\"),\n    yaxis = list(title = \"Salinity (PSU)\",\n                 fixedrange = TRUE),\n    hovermode = \"x unified\",\n    margin = list( t = 80)\n    \n  ) %>%\n  config(displayModeBar = FALSE) \n\np"},{"path":"surface-salinity-azmp.html","id":"trends-1","chapter":"2 Surface Salinity (AZMP)","heading":"2.3 Trends","text":"recent data entry 2024, AZMP Surface Salinity value 30.91 PSU, low among values timeseries.\nSurface Salinity value currently long-term mean, since 2020.\nregional salinity value followed decreasing trend recent years.","code":""},{"path":"surface-salinity-azmp.html","id":"summary-table","chapter":"2 Surface Salinity (AZMP)","heading":"2.3.1 Summary Table","text":"","code":""},{"path":"surface-salinity-azmp.html","id":"relevance-to-research-and-stock-assessments-1","chapter":"2 Surface Salinity (AZMP)","heading":"2.4 Relevance to Research and Stock Assessments","text":"harvested species expected sensitive salinity within range observed near-future projected values Northwest Atlantic(Chabot, Guénette, Stortini 2013). Thus, salinity perhaps greatest potential relevance stocks fisheries indirect effects, via changes surface productivity stratification.Gulf Maine-Scotian Shelf region, freshening events associated changes timing magnitude springtime phytoplankton blooms, ultimately reducing primary productivity coastal waters (Ji et al. 2008). changes primary productivity can propagate secondary productivity, make large portions larval diets commercially important species (Becker et al. 2020).","code":""},{"path":"surface-salinity-azmp.html","id":"variable-definitions-1","chapter":"2 Surface Salinity (AZMP)","heading":"2.5 Variable Definitions","text":"","code":""},{"path":"surface-salinity-azmp.html","id":"get-the-data-1","chapter":"2 Surface Salinity (AZMP)","heading":"2.6 Get the Data","text":"","code":"\nlibrary(marea)\ndata('azmp_salinity')\nplot(azmp_salinity)"},{"path":"surface-temperature-from-satellite-data-azmp.html","id":"surface-temperature-from-satellite-data-azmp","chapter":"3 Surface Temperature from Satellite Data (AZMP)","heading":"3 Surface Temperature from Satellite Data (AZMP)","text":"Data Type: Tabular DataSpatial Scope: Scotian Shelf (4X, 4V, 4W)Duration 1982-2024Source: DFO Atlantic Zone Monitoring Program via azmpdata","code":""},{"path":"surface-temperature-from-satellite-data-azmp.html","id":"introduction-to-indicator-2","chapter":"3 Surface Temperature from Satellite Data (AZMP)","heading":"3.1 Introduction to Indicator","text":"Sea surface temperature satellite data refers continuous sea surface temperature (SST) fields derived satellite sensors, representing temperature ocean’s surface. , continuous fields summarized within non-mutually exclusive regions representing NAFO zones subzone divisions.Sea surface temperature influenced variety conditions spanning multiple spatial temporal scales. region, long-term trends SST consistent expectations anthropogenic climate change (Greenan et al. 2019). time, decadal--interannual regional SST trends influenced atmospheric indicators like described book, short-term local values can influenced many oceanographic climate factors, freshwater input, ocean currents, weather events.","code":""},{"path":"surface-temperature-from-satellite-data-azmp.html","id":"view-data-2","chapter":"3 Surface Temperature from Satellite Data (AZMP)","heading":"3.2 View Data","text":"","code":"\nlibrary(plotly)\nplotly_df <- azmp_satellite_temperature@data\nplot_ly(data = plotly_df, x= ~year, colors = \"Set1\") %>%\n  add_lines(y = ~mean_value,\n            color = ~region,\n            text = ~paste0(\"<b>\",region,\"<\/b>: \",round(mean_value,2),\"°C\"),\n            hoverinfo = \"x+text\",\n            line = list(width = 2)) %>%\n    layout(\n    title = \"Surface Tmperature from Satellite for Scotian Shelf (4X, 4V, 4W)\",\n    xaxis = list(title = \"Year\"),\n    yaxis = list(title = \"Sea Surface Temperature (°C)\",\n                 fixedrange = T),\n    hovermode = \"x unified\"\n  ) %>%\n  config(displayModeBar = FALSE)"},{"path":"surface-temperature-from-satellite-data-azmp.html","id":"trends-2","chapter":"3 Surface Temperature from Satellite Data (AZMP)","heading":"3.3 Trends","text":"Surface temperatures area less variable across region compared bottom temperature. Among regions dataset, mean surface temperatures range 8.94 4W 6.83 4Vn.overall trend increasing across regions. 6 regions increasing Surface Temperature Satellite trends 0 negative trends. 6 trends statistically significant time.recent year sampling (2024), 6 regions values high compared overall timeseries (>70th percentile), 0 regions values moderate (30th 70th percentile), 0 regions low values (<30th percentile) within timeseries.","code":""},{"path":"surface-temperature-from-satellite-data-azmp.html","id":"relevance-to-research-and-stock-assessments-2","chapter":"3 Surface Temperature from Satellite Data (AZMP)","heading":"3.4 Relevance to Research and Stock Assessments","text":"Changes sea surface temperature great impact fisheries stocks direct indirect effects.Sea surface temperatures can directly impact fisheries via changes distribution phenology key fisheries species (Hutchings et al. 2012). changes likely result loss decline commercially important species, also gain increase others. Atlantic Canada projected experience decreases species maximum catch Scotian Shelf surrounding bioregions, projected gains towards Arctic (Cheung et al. 2010). changes consistent expected poleward shifts species track climatic envelopes towards poles. Changes surface temperature might also affect phenological process key species, including spawning times predator/prey encounters.Sea surface temperatures can also affect physical chemical properties marine ecosystems, turn, affecting species. Warming freshening surface waters can lead increased stratification coastal oceans, influencing primary productivity nutrient cycling.","code":""},{"path":"surface-temperature-from-satellite-data-azmp.html","id":"variable-definitions-2","chapter":"3 Surface Temperature from Satellite Data (AZMP)","heading":"3.5 Variable Definitions","text":"","code":""},{"path":"surface-temperature-from-satellite-data-azmp.html","id":"get-the-data-2","chapter":"3 Surface Temperature from Satellite Data (AZMP)","heading":"3.6 Get the Data","text":"","code":"\nlibrary(marea)\ndata('azmp_satellite_temperature')\nplot(azmp_satellite_temperature)"},{"path":"atlantic-multidecadal-oscillation-index.html","id":"atlantic-multidecadal-oscillation-index","chapter":"4 Atlantic MultiDecadal Oscillation Index","heading":"4 Atlantic MultiDecadal Oscillation Index","text":"Data Type: Tabular DataSpatial Scope: Northern Hemisphere (0-60N)Duration 1854-2025Source: NOAA , https://www1.ncdc.noaa.gov/pub/data/cmb/ersst/v5/index/ersst.v5.amo.dat","code":""},{"path":"atlantic-multidecadal-oscillation-index.html","id":"introduction-to-indicator-3","chapter":"4 Atlantic MultiDecadal Oscillation Index","heading":"4.1 Introduction to Indicator","text":"AMO describes long-duration changes sea surface temperature North Atlantic Ocean characterized extended cool (negative) warm (positive) phases may last 20-60 years (Knight, Folland, Scaife 2006). AMO values computed detrended sea surface temperature anomalies, resultant value offers description large-scale temperature variation independent gradual warming result climate change.AMO linked several oceanographic atmospheric processes including air temperature precipitation, storm strength, variability ocean currents.","code":""},{"path":"atlantic-multidecadal-oscillation-index.html","id":"view-data-3","chapter":"4 Atlantic MultiDecadal Oscillation Index","heading":"4.2 View Data","text":"","code":"\nlibrary(plotly)\nplotly_df <- data@data %>%\n  mutate(date = lubridate::make_date(year, month, day = 1),\n         smooth_1yr = zoo::rollapply(SSTA_value, mean, width = 12, partial = TRUE),\n         smooth_10yr = zoo::rollapply(SSTA_value, mean, width = 120, partial = TRUE),\n         overall_mean = mean(SSTA_value))\n\np <- plot_ly(plotly_df, x = ~date) %>%\n  add_lines(y = ~SSTA_value,\n            name = \"Monthly Anomaly\",\n            line = list(color = \"lightgrey\"),\n            hovertemplate = \"Monthly anomaly: %{y:.2f}<extra><\/extra>\"\n           ) %>%\n  add_lines(y = ~smooth_1yr,\n            name = \"1-yr Smooth\",\n            line = list(color = \"blue\", width = 2),\n            hovertemplate = \"1-yr smoothed: %{y:.2f}<extra><\/extra>\",\n            ) %>%\n  add_lines(y = ~smooth_10yr,\n            name = \"10-yr Smooth\",\n            line = list(color = \"red\", width = 2),\n            hovertemplate = \"10-yr smoothed: %{y:.2f}<extra><\/extra>\",\n           ) %>%\n    add_lines(y = ~overall_mean,\n            name = \"Overall Mean\",\n            line = list(color = \"black\", width = 2, dash = \"dash\"),\n            hovertemplate = \"Overall Mean: %{y:.2f}<extra><\/extra>\",\n           ) %>%\n  layout(\n    title = \"Atlantic Multidecadal Oscillation Index for Northern Hemisphere\",\n    xaxis = list(title = \"Date\"),\n    yaxis = list(title = \"AMO Index\",\n                 fixedrange = TRUE),\n    hovermode = \"x unified\",\n    margin = list( t = 80)\n    \n  ) %>%\n  config(displayModeBar = FALSE) \n\np"},{"path":"atlantic-multidecadal-oscillation-index.html","id":"trends-3","chapter":"4 Atlantic MultiDecadal Oscillation Index","heading":"4.3 Trends","text":"recent data entry 8/2025, AMO value 0.86, high among values timeseries.\nAMO value currently long-term mean, since 11/1996.\nAMO value followed (n) increasing trend recent years.","code":""},{"path":"atlantic-multidecadal-oscillation-index.html","id":"summary-table-1","chapter":"4 Atlantic MultiDecadal Oscillation Index","heading":"4.3.1 Summary Table","text":"","code":""},{"path":"atlantic-multidecadal-oscillation-index.html","id":"relevance-to-research-and-stock-assessments-3","chapter":"4 Atlantic MultiDecadal Oscillation Index","heading":"4.4 Relevance to Research and Stock Assessments","text":"AMO can directly indirectly affect marine ecosystem function (Nye et al. 2014).Canada’s maritimes region, AMO closely linked several ecological trends relevance fisheries stock assessments. AMO shown negative correlations primary productivity fish biomass Eastern Canada (NAFO zones 4X, 5YB, Western Scotian Shelf, Bay Fundy) (Araújo Bundy 2012), hypothesized limitation stock size despite moratoriums fishing activity commercially important species like Atlantic salmon (Condron et al. 2005).Still, specific effects AMO marine resources can vary aross space. example, AMO displayed positive relationship catch per unit effort bluefin Tuna Canadian regions (Gulf St. Lawrence Nova Scotia), contrastng negative correlation United States (Hansell et al. 2020). Impacts AMO focal species therefore likely related thresholds thermal performance focal species within ecosystem.","code":""},{"path":"atlantic-multidecadal-oscillation-index.html","id":"variable-definitions-3","chapter":"4 Atlantic MultiDecadal Oscillation Index","heading":"4.5 Variable Definitions","text":"","code":""},{"path":"atlantic-multidecadal-oscillation-index.html","id":"get-the-data-3","chapter":"4 Atlantic MultiDecadal Oscillation Index","heading":"4.6 Get the Data","text":"","code":"\nlibrary(marea)\ndata('amo')\nplot(amo)"},{"path":"arctic-oscillation-index.html","id":"arctic-oscillation-index","chapter":"5 Arctic Oscillation Index","heading":"5 Arctic Oscillation Index","text":"Data Type: Tabular DataSpatial Scope: Northern HemisphereDuration 1950-2025Source: NOAA CPC, https://www.cpc.ncep.noaa.gov/products/precip/CWlink/daily_ao_index/","code":""},{"path":"arctic-oscillation-index.html","id":"introduction-to-indicator-4","chapter":"5 Arctic Oscillation Index","heading":"5.1 Introduction to Indicator","text":"Arctic Oscillation describes variability atmospheric pressure Arctic surrounding mid-latitude regions Northern Hemisphere, linked fluctuations strength polar vortex (Thompson Wallace 1998). trend AO time follow particular periodicity.Effects strong AO anomalies pronounced Northern Hemisphere winter. Positive AO anomaly values represent lower--average pressure Arctic regions higher--average pressure mid-latitudes, resulting stronger polar vortex contained winter storm activity Arctic region. Negative AO values represent opposite – higher--average pressures Arctic lower--average pressures mid-latitudes. negative phases, jet stream weaker can meander, leading anomalous cold events mid-latitudes, particularly Eastern North America Eurasia (Li et al. 2017; et al. 2017).AO highly correlated North Atlantic Oscillation (NAO) discussion exists around whether two distinct (refs), AO index better reflects changes occurring high arctic latitudes.","code":""},{"path":"arctic-oscillation-index.html","id":"view-data-4","chapter":"5 Arctic Oscillation Index","heading":"5.2 View Data","text":"","code":"\nlibrary(plotly)\nplotly_df <- data@data %>%\n  mutate(date = lubridate::make_date(year, month, day = 1),\n         smooth_1yr = zoo::rollmean(anomaly_value, k=12, fill = NA, align = \"center\"),\n         smooth_10yr = zoo::rollmean(anomaly_value, k = 120, fill = NA, align = \"center\"),\n         overall_mean = mean(anomaly_value))\n\n\np <- plot_ly(plotly_df, x = ~date) %>%\n  add_lines(y = ~anomaly_value,\n            name = \"Monthly Anomaly\",\n            line = list(color = \"lightgrey\"),\n            hovertemplate = \"Anomaly Value: %{y:.2f} <extra><\/extra>\"\n  ) %>%\n  add_lines(y = ~smooth_1yr,\n            name = \"1-yr Smooth\",\n            line = list(color = \"blue\", width = 2),\n            hovertemplate = \"1-yr Smooth: %{y:.2f} <extra><\/extra>\"\n  ) %>%\n  add_lines(y = ~smooth_10yr,\n            name = \"10-yr Smooth\",\n            line = list(color = \"red\", width = 2),\n            hovertemplate = \"10-yr Smooth: %{y:.2f} <extra><\/extra>\") %>%\n  add_lines(y = ~overall_mean,\n            name = \"Overall Mean\",\n            line = list(color = \"black\", width = 2, dash = \"dash\"),\n            hovertemplate = \"Timeseries Mean: %{y:.2f} <extra><\/extra>\") %>%\n  layout(\n    title = \"Arctic Oscillation Index for Northern Hemisphere\",\n    xaxis = list(title = \"Date\",\n                 hoverformat = \"%b %Y\" ),\n    yaxis = list(title = \"AO Index\",\n                 fixedrange = T),\n    hovermode = \"x unified\",\n    margin = list(t = 80)\n    \n  ) %>%\n  config(displayModeBar = FALSE)\n\np "},{"path":"arctic-oscillation-index.html","id":"trends-4","chapter":"5 Arctic Oscillation Index","heading":"5.3 Trends","text":"recent data entry 8/2025, AO value 0.036, moderate among values timeseries.\nAO value currently long-term mean, since 2/2025.\nAO value followed decreasing trend recent years.","code":""},{"path":"arctic-oscillation-index.html","id":"summary-table-2","chapter":"5 Arctic Oscillation Index","heading":"5.3.1 Summary Table","text":"","code":""},{"path":"arctic-oscillation-index.html","id":"relevance-to-research-and-stock-assessments-4","chapter":"5 Arctic Oscillation Index","heading":"5.4 Relevance to Research and Stock Assessments","text":"Direct examples AO’s effect fisheries less common compared atmospheric variables, index potential effects stocks association sea ice coverage freshwater input Arctic North Atlantic oceans (Greene et al. 2013).Canada, fisheries responses AO identified. Positive springtime AO values associated decreased recruitment juvenile movement arctic cod Beaufort Sea, positive AO years result increased transport fish towards eastern waters (Herbig et al. 2023). AO also shown important predictor exploitable snow crab biomass, effects vary across regions timescales (Mullowney et al. 2023).","code":""},{"path":"arctic-oscillation-index.html","id":"variable-definitions-4","chapter":"5 Arctic Oscillation Index","heading":"5.5 Variable Definitions","text":"","code":""},{"path":"arctic-oscillation-index.html","id":"get-the-data-4","chapter":"5 Arctic Oscillation Index","heading":"5.6 Get the Data","text":"","code":"\nlibrary(marea)\ndata('ao')\nplot(ao)"},{"path":"commercial-fisheries.html","id":"commercial-fisheries","chapter":"6 Commercial Fisheries","heading":"6 Commercial Fisheries","text":"Data Type: Tabular Data (within eco_indicators)Spatial Scope: MaritimesDuration 1970-2022Source: Bundy et al. 2017","code":""},{"path":"commercial-fisheries.html","id":"introduction-to-indicator-5","chapter":"6 Commercial Fisheries","heading":"6.1 Introduction to Indicator","text":"Commercial fishing major marine human activity Atlantic Canada, several high-value species present region. Fisheries landing data can indicate pressure exerted target groups, pressure communities, trophic ecosystem distributions fishing pressure, fisheries productivity. Landing values can also indicate pressure exerted species community via human disturbance, bycatch, changes species interactions.","code":""},{"path":"commercial-fisheries.html","id":"view-data-5","chapter":"6 Commercial Fisheries","heading":"6.2 View Data","text":"","code":"\nlibrary(tidyr)\nlibrary(plotly)\nlibrary(stringr)\n\n# function to create plot with dropdown menu ------------------------------\nmake_landings_dropdown_plot <- function(df,\n                                      year_col   = \"year\",\n                                      region_col = \"region\",\n                                      value_suffix = \"_value\") {\n\n  # convert to long format\n  long <- df %>%\n    janitor::clean_names() %>%\n    pivot_longer(\n      cols = ends_with(value_suffix),\n      names_to = \"metric\",\n      values_to = \"value\"\n    ) %>%\n    # remove suffix\n    mutate(\n      metric = str_remove(metric, \"_value\")\n    ) %>%\n    # drop NAs (some regions don't have data for some variables or years)\n    tidyr::drop_na(value)\n\n  # find all metrics and regions\n  metrics <- unique(long$metric)\n  regions <- unique(long[[region_col]])\n\n  # assign regions to consistent colors\n  region_colors <- setNames(hcl.colors(length(regions), palette = \"Dark 3\"), regions)\n\n  # clean names for dropdown panels, helper\n  pretty_label <- function(x) str_to_title(gsub(\"_\", \" \", x)) %>% gsub(\" L\",\"\",.)\n\n\n  # build plot -----------------\n  p <- plot_ly()\n\n  # Add bar traces: metric1 has region1..K, metric2 has region1..K, ...\n  for (metric_i in seq_along(metrics)) {\n    m <- metrics[metric_i]\n\n    for (region_i in regions) {\n      dat <- long %>%\n        filter(metric == m, .data[[region_col]] == region_i) %>%\n        group_by(.data[[year_col]]) %>%     # in case you have multiple rows per year\n        summarise(value = sum(value), .groups = \"drop\") %>%\n        arrange(.data[[year_col]])\n\n      # If a region truly has no data for that metric, add an empty trace\n      # (keeps trace indexing stable)\n      if (nrow(dat) == 0) {\n        dat <- tibble::tibble(!!year_col := integer(0), value = numeric(0))\n      }\n\n      p <- p %>% add_bars(\n        data = dat,\n        x = ~.data[[year_col]],\n        y = ~value,\n        name = as.character(region_i),\n        legendgroup = as.character(region_i),\n        showlegend = (metric_i == 1),\n        visible = (metric_i == 1),\n        marker = list(color = region_colors[[as.character(region_i)]]),\n        hovertemplate = paste0(\"<b>\", region_i,\":<\/b> \",\"%{y:,.2s}<extra><\/extra>\")      )\n    }\n  }\n\n  n_regions <- length(regions)\n  n_traces  <- length(metrics) * n_regions\n\n  buttons <- lapply(seq_along(metrics), function(metric_i) {\n    vis <- rep(FALSE, n_traces)\n    shl <- rep(FALSE, n_traces)\n\n    idx_start <- (metric_i - 1) * n_regions + 1\n    idx_end   <- metric_i * n_regions\n    vis[idx_start:idx_end] <- TRUE\n    shl[idx_start:idx_end] <- TRUE\n\n    list(\n      method = \"update\",\n      args = list(\n        list(visible = vis, showlegend = shl),\n        list(\n          title = pretty_label(metrics[metric_i]),\n          yaxis = list(title = paste0(pretty_label(metrics[metric_i]), value_suffix))\n        )\n      ),\n      label = pretty_label(metrics[metric_i])\n    )\n  })\n\n  p %>%\n    layout(\n      barmode = \"stack\",\n      hovermode = \"x unified\",\n      title = pretty_label(metrics[1]),\n      xaxis = list(title = year_col, type = \"category\"),  # keep one bar per year\n      yaxis = list(title = paste0(pretty_label(metrics[1]), value_suffix), fixedrange = TRUE),\n      legend = list(\n        title = list(text = region_col),\n        x = 1.02, xanchor = \"left\",\n        y = 1,    yanchor = \"top\"\n      ),\n      updatemenus = list(list(\n        type = \"dropdown\",\n        x = 0, xanchor = \"left\",\n        y = 1.15, yanchor = \"top\",\n        buttons = buttons\n      )),\n      margin = list(r = 180, t = 80)\n    )\n}\n\n# usage:\np <- make_landings_dropdown_plot(data@data)\np <- p %>% config(displayModeBar= F)\n  \n# use html to pause scrolling on main page while scrolling in dropdown tab\np %>% htmlwidgets::onRender(\"\nfunction(el, x) {\n\n  const gd = el.querySelector('.js-plotly-plot, .plotly');\n  if (!gd) return;\n\n  function hasPlotlyMenuAncestor(node) {\n    const menuClasses = new Set([\n      'updatemenu', 'updatemenus', 'updatemenu-container',\n      'dropdown', 'dropdown-container',\n      'scrollbar', 'scrollbar-container'\n    ]);\n\n    while (node && node !== gd && node !== document) {\n      if (node.classList) {\n        for (const c of node.classList) {\n          if (menuClasses.has(c)) return true;\n        }\n      }\n      node = node.parentNode;\n    }\n    return false;\n  }\n\n  function wheelHandler(e) {\n    if (!gd.contains(e.target)) return;\n\n    if (hasPlotlyMenuAncestor(e.target)) {\n      // IMPORTANT:\n      e.preventDefault();\n    }\n  }\n\n  document.addEventListener('wheel', wheelHandler, { capture: true, passive: false });\n\n  document.addEventListener('touchmove', function(e) {\n    if (!gd.contains(e.target)) return;\n    if (hasPlotlyMenuAncestor(e.target)) e.preventDefault();\n  }, { capture: true, passive: false });\n\n}\n\")"},{"path":"commercial-fisheries.html","id":"trends-5","chapter":"6 Commercial Fisheries","heading":"6.3 Trends","text":"Landing values vary per taxonomic group, landing values decreasing time.9 landings (excluding “”), 7 decreasing trends time, 2 increasing trend time. trends statistically significant.recent date data collection 2022; 10 recent years sampling (2012–2022), 5 landings lowest values date, 1 landing highest value.","code":""},{"path":"commercial-fisheries.html","id":"relevance-to-research-and-stock-assessments-5","chapter":"6 Commercial Fisheries","heading":"6.4 Relevance to Research and Stock Assessments","text":"Total landings can lend insight pressures stocks marine ecosystems.High landings indicate many individuals removed system non-target species may faced pressures disturbance fishing processes.Low landings, alternatively, might indicate removal fishing pressure (particularly fisheries closed), indicate reduced catch per unit effort active stocks.","code":""},{"path":"commercial-fisheries.html","id":"get-the-data-5","chapter":"6 Commercial Fisheries","heading":"6.5 Get the Data","text":"","code":"\nlibrary(marea)\ndata('eco_indicators')\nplot(eco_indicators)"},{"path":"references.html","id":"references","chapter":"References","heading":"References","text":"","code":""}]
